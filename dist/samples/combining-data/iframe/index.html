<!DOCTYPE html>
<!--
 @license
 Copyright 2019 Google LLC. All Rights Reserved.
 SPDX-License-Identifier: Apache-2.0
-->
<html>
  <head>
    <title>Mashups with google.maps.Data</title>
    <script src="https://polyfill.io/v3/polyfill.min.js?features=default"></script>

    
    
    <script type="module">!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver((e=>{for(const o of e)if("childList"===o.type)for(const e of o.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)})).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerpolicy&&(t.referrerPolicy=e.referrerpolicy),"use-credentials"===e.crossorigin?t.credentials="include":"anonymous"===e.crossorigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();
/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * SPDX-License-Identifier: Apache-2.0
 */
const e=[{stylers:[{visibility:"off"}]},{featureType:"landscape",elementType:"geometry",stylers:[{visibility:"on"},{color:"#fcfcfc"}]},{featureType:"water",elementType:"geometry",stylers:[{visibility:"on"},{color:"#bfd4ff"}]}];let t,o=Number.MAX_VALUE,n=-Number.MAX_VALUE;function r(e){const t=[5,69,54],r=[151,83,34],s=(e.getProperty("census_variable")-o)/(n-o),a=[];for(let o=0;o<3;o++)a.push((r[o]-t[o])*s+t[o]);let l=!0;(null==e.getProperty("census_variable")||isNaN(e.getProperty("census_variable")))&&(l=!1);let i=.5,c=1;return"hover"===e.getProperty("state")&&(i=c=2),{strokeWeight:i,strokeColor:"#fff",zIndex:c,fillColor:"hsl("+a[0]+","+a[1]+"%,"+a[2]+"%)",fillOpacity:.75,visible:l}}function s(e){e.feature.setProperty("state","hover");const t=(e.feature.getProperty("census_variable")-o)/(n-o)*100;document.getElementById("data-label").textContent=e.feature.getProperty("NAME"),document.getElementById("data-value").textContent=e.feature.getProperty("census_variable").toLocaleString(),document.getElementById("data-box").style.display="block",document.getElementById("data-caret").style.display="block",document.getElementById("data-caret").style.paddingLeft=t+"%"}function a(e){e.feature.setProperty("state","normal")}window.initMap=function(){t=new google.maps.Map(document.getElementById("map"),{center:{lat:40,lng:-100},zoom:4,styles:e}),t.data.setStyle(r),t.data.addListener("mouseover",s),t.data.addListener("mouseout",a);const l=document.getElementById("census-variable");google.maps.event.addDomListener(l,"change",(()=>{o=Number.MAX_VALUE,n=-Number.MAX_VALUE,t.data.forEach((e=>{e.setProperty("census_variable",void 0)})),document.getElementById("data-box").style.display="none",document.getElementById("data-caret").style.display="none",function(e){const r=new XMLHttpRequest;r.open("GET",e+".json"),r.onload=function(){const e=JSON.parse(r.responseText);e.shift(),e.forEach((e=>{const r=parseFloat(e[0]),s=e[1];r<o&&(o=r),r>n&&(n=r);const a=t.data.getFeatureById(s);a&&a.setProperty("census_variable",r)})),document.getElementById("census-min").textContent=o.toLocaleString(),document.getElementById("census-max").textContent=n.toLocaleString()},r.send()}(l.options[l.selectedIndex].value)})),t.data.loadGeoJson("https://storage.googleapis.com/mapsdevsite/json/states.js",{idPropertyName:"STATE"}),google.maps.event.addListenerOnce(t.data,"addfeature",(()=>{google.maps.event.trigger(document.getElementById("census-variable"),"change")}))};
</script>
    <style type="text/css">/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * SPDX-License-Identifier: Apache-2.0
 */html,body,#map{height:100%;margin:0;padding:0;overflow:hidden}.nicebox{position:absolute;text-align:center;font-family:Roboto,Arial,sans-serif;font-size:13px;z-index:5;box-shadow:0 4px 6px -4px #333;padding:5px 10px;background:white;background:linear-gradient(to bottom,white 0%,whitesmoke 100%);border:#e5e5e5 1px solid}#controls{top:10px;left:110px;width:360px;height:45px}#data-box{top:10px;left:500px;height:45px;line-height:45px;display:none}#census-variable{width:360px;height:20px}#legend{display:flex;display:-webkit-box;padding-top:7px}.color-key{background:linear-gradient(to right,#db4639 0%,#db7f29 17%,#d1bf1f 33%,#92c51b 50%,#48ba17 67%,#12ab24 83%,#0f9f59 100%);flex:1;-webkit-box-flex:1;margin:0 5px;text-align:left;font-size:1em;line-height:1em}#data-value{font-size:2em;font-weight:700}#data-label{font-size:2em;font-weight:400;padding-right:10px}#data-label:after{content:":"}#data-caret{margin-left:-5px;display:none;font-size:14px;width:14px}
</style>
  </head>
  <body>
    <div id="controls" class="nicebox">
      <div>
        <select id="census-variable">
          <option
            value="https://storage.googleapis.com/mapsdevsite/json/DP02_0066PE"
          >
            Percent of population over 25 that completed high school
          </option>
          <option
            value="https://storage.googleapis.com/mapsdevsite/json/DP05_0017E"
          >
            Median age
          </option>
          <option
            value="https://storage.googleapis.com/mapsdevsite/json/DP05_0001E"
          >
            Total population
          </option>
          <option
            value="https://storage.googleapis.com/mapsdevsite/json/DP02_0016E"
          >
            Average family size
          </option>
          <option
            value="https://storage.googleapis.com/mapsdevsite/json/DP03_0088E"
          >
            Per-capita income
          </option>
        </select>
      </div>
      <div id="legend">
        <div id="census-min">min</div>
        <div class="color-key"><span id="data-caret">&#x25c6;</span></div>
        <div id="census-max">max</div>
      </div>
    </div>
    <div id="data-box" class="nicebox">
      <label id="data-label" for="data-value"></label>
      <span id="data-value"></span>
    </div>
    <div id="map"></div>

    <!-- 
     The `defer` attribute causes the callback to execute after the full HTML
     document has been parsed. For non-blocking uses, avoiding race conditions,
     and consistent behavior across browsers, consider loading using Promises
     with https://www.npmjs.com/package/@googlemaps/js-api-loader.
    -->
    <script
      src="https://maps.googleapis.com/maps/api/js?key=AIzaSyB41DRUbKWJHPxaFjMAwdrzWzbVKartNGg&callback=initMap&v=weekly"
      defer
    ></script>
  </body>
</html>

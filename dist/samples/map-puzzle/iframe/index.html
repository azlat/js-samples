<!DOCTYPE html>
<!--
 @license
 Copyright 2019 Google LLC. All Rights Reserved.
 SPDX-License-Identifier: Apache-2.0
-->
<html>
  <head>
    <title>Map Puzzle</title>
    <script src="https://polyfill.io/v3/polyfill.min.js?features=default"></script>

    
    
    <script type="module">!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver((e=>{for(const i of e)if("childList"===i.type)for(const e of i.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)})).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerpolicy&&(t.referrerPolicy=e.referrerpolicy),"use-credentials"===e.crossorigin?t.credentials="include":"anonymous"===e.crossorigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();
/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * SPDX-License-Identifier: Apache-2.0
 */
class e{constructor(e){this.polys_=[],this.difficulty_="Easy",this.count_=0,this.dataLoaded_=!1,this.NUM_PIECES_=10,this.countries_=[],this.timer_=0,this.START_COLOR_="#3c79de",this.END_COLOR_="#037e29",this.map_=e,this.pieceDiv_=document.createElement("div"),this.timeDiv_=document.createElement("div"),this.createMenu_(),this.setDifficultyStyle_(),this.loadData_()}createMenu_(){const e=document.createElement("div");e.style.cssText="margin: 40px 10px; border-radius: 8px; height: 320px; width: 180px;background-color: white; font-size: 14px; font-family: Roboto;text-align: center; color: grey;line-height: 32px; overflow: hidden";const t=document.createElement("div");t.style.cssText="width: 100%; background-color: #4285f4; color: white; font-size: 20px;line-height: 40px;margin-bottom: 24px",t.innerText="Game Options";const i=document.createElement("div");i.innerText="PIECE:",i.style.fontWeight="800";const s=this.pieceDiv_;s.innerText="0 / "+this.NUM_PIECES_;const o=document.createElement("div");o.innerText="TIME:",o.style.fontWeight="800";const n=this.timeDiv_;n.innerText="0.0 seconds";const r=document.createElement("div");r.innerText="DIFFICULTY:",r.style.fontWeight="800";const l=document.createElement("select");["Easy","Moderate","Hard","Extreme"].forEach((e=>{const t=document.createElement("option");t.value=e.toLowerCase(),t.innerText=e,l.appendChild(t)})),l.style.cssText="border: 2px solid lightgrey; background-color: white; color: #4275f4;padding: 6px;",l.onchange=()=>{this.setDifficulty_(l.value),this.resetGame_()};const a=document.createElement("div");a.innerText="Reset",a.style.cssText="cursor: pointer; border-top: 1px solid lightgrey; margin-top: 18px;color: #4275f4; line-height: 40px; font-weight: 800",a.onclick=this.resetGame_.bind(this),e.appendChild(t),e.appendChild(i),e.appendChild(s),e.appendChild(o),e.appendChild(n),e.appendChild(r),e.appendChild(l),e.appendChild(a),this.map_.controls[google.maps.ControlPosition.TOP_LEFT].push(e)}render(){this.dataLoaded_&&this.start_()}loadData_(){const e=new XMLHttpRequest;e.onreadystatechange=()=>{200==e.status&&e.readyState==XMLHttpRequest.DONE&&this.loadDataComplete_(JSON.parse(e.responseText))},e.open("GET","https://storage.googleapis.com/mapsdevsite/json/puzzle.json",!0),e.send(null)}loadDataComplete_(e){this.dataLoaded_=!0,this.countries_=e,this.start_()}setDifficulty_(e){this.difficulty_=e,this.map_&&this.setDifficultyStyle_()}setDifficultyStyle_(){this.map_.set("styles",{easy:[{stylers:[{visibility:"off"}]},{featureType:"water",stylers:[{visibility:"on"},{color:"#d4d4d4"}]},{featureType:"landscape",stylers:[{visibility:"on"},{color:"#e5e3df"}]},{featureType:"administrative.country",elementType:"labels",stylers:[{visibility:"on"}]},{featureType:"administrative.country",elementType:"geometry",stylers:[{visibility:"on"},{weight:1.3}]}],moderate:[{stylers:[{visibility:"off"}]},{featureType:"water",stylers:[{visibility:"on"},{color:"#d4d4d4"}]},{featureType:"landscape",stylers:[{visibility:"on"},{color:"#e5e3df"}]},{featureType:"administrative.country",elementType:"labels",stylers:[{visibility:"on"}]}],hard:[{stylers:[{visibility:"off"}]},{featureType:"water",stylers:[{visibility:"on"},{color:"#d4d4d4"}]},{featureType:"landscape",stylers:[{visibility:"on"},{color:"#e5e3df"}]}],extreme:[{elementType:"geometry",stylers:[{visibility:"off"}]}]}[this.difficulty_])}resetGame_(){this.removeCountries_(),this.count_=0,this.setCount_(),this.startClock_(),this.addRandomCountries_()}setCount_(){this.pieceDiv_.innerText=this.count_+" / "+this.NUM_PIECES_,this.count_==this.NUM_PIECES_&&this.stopClock_()}stopClock_(){window.clearInterval(this.timer_)}startClock_(){this.stopClock_();const e=this.timeDiv_;e&&(e.textContent="0.0 seconds");const t=new Date;this.timer_=window.setInterval((()=>{const i=(new Date).getTime()-t.getTime();e&&(e.textContent=(i/1e3).toFixed(2)+" seconds")}),100)}addRandomCountries_(){this.countries_.sort((()=>Math.round(Math.random())-.5));const e=this.countries_.slice(0,this.NUM_PIECES_);for(let t,i=0;t=e[i];i++)this.addCountry_(t)}addCountry_(e){const t={strokeColor:this.START_COLOR_,strokeOpacity:.8,strokeWeight:2,fillColor:this.START_COLOR_,fillOpacity:.35,geodesic:!0,map:this.map_,draggable:!0,zIndex:2,paths:e.start.map(google.maps.geometry.encoding.decodePath)},i=new google.maps.Polygon(t);google.maps.event.addListener(i,"dragend",(()=>{this.checkPosition_(i,e)})),this.polys_.push(i)}boundsContainsPoly_(e,t){const i=new google.maps.LatLngBounds(new google.maps.LatLng(e[0][0],e[0][1]),new google.maps.LatLng(e[1][0],e[1][1])),s=t.getPaths().getArray();for(let o=0;o<s.length;o++){const e=s[o].getArray();for(let t=0;t<e.length;t++)if(!i.contains(e[t]))return!1}return!0}replacePiece_(e,t){const i={strokeColor:this.END_COLOR_,fillColor:this.END_COLOR_,draggable:!1,zIndex:1,paths:t.end.map(google.maps.geometry.encoding.decodePath)};e.setOptions(i),this.count_++,this.setCount_()}checkPosition_(e,t){this.boundsContainsPoly_(t.bounds,e)&&this.replacePiece_(e,t)}start_(){this.setDifficultyStyle_(),this.resetGame_()}removeCountries_(){for(let e,t=0;e=this.polys_[t];t++)e.setMap(null);this.polys_=[]}}window.initMap=function(){const t=new google.maps.Map(document.getElementById("map"),{disableDefaultUI:!0,center:{lat:10,lng:60},zoom:2});new e(t)};
</script>
    <style type="text/css">/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * SPDX-License-Identifier: Apache-2.0
 */#map{height:100%}html,body{height:100%;margin:0;padding:0}
</style>
  </head>
  <body>
    <div id="map"></div>

    <!-- 
     The `defer` attribute causes the callback to execute after the full HTML
     document has been parsed. For non-blocking uses, avoiding race conditions,
     and consistent behavior across browsers, consider loading using Promises
     with https://www.npmjs.com/package/@googlemaps/js-api-loader.
    -->
    <script
      src="https://maps.googleapis.com/maps/api/js?key=AIzaSyB41DRUbKWJHPxaFjMAwdrzWzbVKartNGg&callback=initMap&libraries=geometry&v=weekly"
      defer
    ></script>
  </body>
</html>
